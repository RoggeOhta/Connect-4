## 启动方法
```python main.py```


## MEMO
### 二维码
必须搭配4个二维码贴在棋盘的四个角
二维码是cv2.aruco.DICT_6X6_250 ,现实世界大小为10毫米

### opencv
opencv要用contrib增强包, 不用安装原版

### 机械臂
- 机械臂全新使用可能需要先校准，调整ArmInterface的构造函数里面的常量即可
- 找到一个角度最快的方法就是先断电，然后手动挪到目标位置上，再上电读参数
- 机械臂无响应，可以断电重连解决
- 读角度存在误差，无必要不要经常读角度
- 角度运动的精度大于坐标运动，因为坐标运动会引入计算误差
- 运动速度影响进度，精细操作时尽量慢速移动，避免惯性带来误差
- 因为重力因素，机械臂水平伸直越远，精度越差
- 吸泵的接线方法是黄白-(2,5),红黑-(5v,G)

### 识别与相机
识别步骤
1. 找到4个二维码点位
2. 根据点位，自动拉伸棋盘至画面
3. 网格分割
4. 颜色识别，累计特定颜色像素点个数大于阈值判定颜色

### 对弈逻辑
目前的对弈逻辑采用的Pytorch训练的DQN网络+防呆逻辑
> 防呆逻辑是指，防止能赢的棋不赢，能堵的子不堵，防呆逻辑只看未来一步，且优先级大于DQN网络

### 棋盘表示
棋盘的表示方式为二维数组，其原点`Grid[0][0]`表示棋盘的左上角,两个坐标分别是x和y，即`Grid[x][y]`，**并非**传统的`Grid[row][col]`

### 如何新增一个状态
1. 创建一个类，继承自State
2. 为其指定一个`DEFAULT_CMD`，用于别的状态转移到这里
3. 实现其`operation()`方法
4. 如有必要，在`operation()`方法的尾部设置下一个状态
5. 在实例化以后，可以为其连接其他状态，组成状态机



----

[机械臂文档](https://docs.elephantrobotics.com/docs/gitbook/2-serialproduct/2.1-280/2.1.6.1-IntroductionOfProductParameters.html)
[吸泵文档](https://docs.elephantrobotics.com/docs/gitbook/2-serialproduct/2.7-accessories/2.7.2%20pump/2.7.2.1-pump.html)


## 优化点
1. 棋子堆的结构应该尽量靠近机械臂，一列红色一列黄色,以减少力臂过长导致的重力影响
2. 所有具体点位还有优化的空间，比如棋盘顶部，抓取棋子等
3. 目前延时设置比较保守，可以优化一下时间让机械臂停顿更少

